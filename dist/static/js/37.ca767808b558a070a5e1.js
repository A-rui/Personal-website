webpackJsonp([37],{Y5cp:function(t,s){},iBTA:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),a=e.n(i),o=e("mvHQ"),n=e.n(o),r=e("uKX6"),d=e("gwNS"),c={beforeRouteEnter:function(t,s,e){document.getElementById("app").scrollTop=0,e()},beforeRouteUpdate:function(t,s,e){document.getElementById("app").scrollTop=0,e()}},l=e("PJh5"),m=e.n(l),v={filters:{formatDate:function(t){return t&&m()(t).format("YYYY-MM-DD")||"请选择"}},mixins:[c],computed:{isReadonly:function(){return!!this.$route.query.id}},data:function(){return{dateType:"",isDatePickerShow:!1,form:{kssj:"",jssj:"",cjsy:"",mdd:"",ydyymc:""},list:[],dspToken:localStorage.dspToken}},components:{datePicker:r.a},mounted:function(){this.loadList()},methods:{loadList:function(){var t=this;Object(d.jwjybaQuerydata4list)({dspToken:this.dspToken}).then(function(s){t.list=s.data||[]})},loadDetail:function(t){var s=this;t&&Object(d.jwjybaQuerydata4object)({jwjybaId:t,dspToken:this.dspToken}).then(function(t){var e=t.data[0];s.$router.push({name:"detail",query:{title:"京外就医备案详情",data:n()({"开始时间":e.kssj,"结束时间":e.jssj,"出京事由":e.cjsy,"目的地":e.mdd,"异地医院名称":e.ydyymc,"提交时间":e.createTime})}})})},showDatePicker:function(t){this.isDatePickerShow=!0,this.dateType=t},fetchDate:function(t){this.form[this.dateType]=t.originValue,this.isDatePickerShow=t.showDatePicker},hideDatePicker:function(t){this.isDatePickerShow=t.showDatePicker},submit:function(){var t=this;this.form.kssj?this.form.jssj?this.form.cjsy?this.form.mdd?this.form.ydyymc?Object(d.jwjybaSavedata)(a()({},this.form,{kssj:m()(this.form.kssj).format("YYYY-MM-DD"),jssj:m()(this.form.jssj).format("YYYY-MM-DD"),dspToken:this.dspToken})).then(function(s){s.pkValue;t.$toast("提交成功"),t.loadList()}):this.$toast("请填写异地医院名称"):this.$toast("请填写目的地"):this.$toast("请填写出京事由"):this.$toast("请选择结束时间"):this.$toast("请选择开始时间")}}},f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"hospitalsign"},[e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v("京外就医备案")]),t._v(" "),e("div",{staticClass:"topinfo",class:{"has-arrow":!t.isReadonly}},[e("div",{staticClass:"post"},[t._v("开始时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.kssj},on:{click:function(s){!t.isReadonly&&t.showDatePicker("kssj")}}},[t._v(t._s(t._f("formatDate")(t.form.kssj)))])]),t._v(" "),e("div",{staticClass:"topinfo",class:{"has-arrow":!t.isReadonly}},[e("div",{staticClass:"post"},[t._v("结束时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.jssj},on:{click:function(s){!t.isReadonly&&t.showDatePicker("jssj")}}},[t._v(t._s(t._f("formatDate")(t.form.jssj)))])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("出京事由")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cjsy,expression:"form.cjsy"}],attrs:{type:"text",placeholder:"请输入出京事由",readonly:t.isReadonly},domProps:{value:t.form.cjsy},on:{input:function(s){s.target.composing||t.$set(t.form,"cjsy",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("目的地")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mdd,expression:"form.mdd"}],attrs:{type:"text",readonly:t.isReadonly,placeholder:"请输入目的地"},domProps:{value:t.form.mdd},on:{input:function(s){s.target.composing||t.$set(t.form,"mdd",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("异地医院名称")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ydyymc,expression:"form.ydyymc"}],attrs:{type:"text",readonly:t.isReadonly,placeholder:"请输入异地医院名称"},domProps:{value:t.form.ydyymc},on:{input:function(s){s.target.composing||t.$set(t.form,"ydyymc",s.target.value)}}})])])]),t._v(" "),t.isReadonly?t._e():e("div",{staticClass:"sign-btn",on:{click:t.submit}},[t._v("提交")]),t._v(" "),e("div",{staticClass:"historylist"},[e("p",{staticClass:"historytitle"},[t._v("就医记录")]),t._v(" "),t._l(t.list,function(s,i){return e("div",{key:i,staticClass:"item",on:{click:function(e){return t.loadDetail(s.pk)}}},[e("div",[e("p",[t._v("就医日期："+t._s(s.kssj))]),t._v(" "),e("p",[t._v(t._s(s.ydyymc))])]),t._v(" "),e("div",[e("van-icon",{attrs:{name:"arrow"}})],1)])})],2),t._v(" "),e("date-picker",{attrs:{"date-type":"date",show:t.isDatePickerShow},on:{fetchData:t.fetchDate,cancel:t.hideDatePicker,hide:t.hideDatePicker}})],1)},staticRenderFns:[]};var u=e("VU/8")(v,f,!1,function(t){e("Y5cp")},"data-v-17fdd5f5",null);s.default=u.exports}});
//# sourceMappingURL=37.ca767808b558a070a5e1.js.map