webpackJsonp([31],{cU1V:function(t,s){},nz0e:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("fZjL"),a=e.n(i),o=e("uKX6"),l=e("ceV/"),n=e("gwNS"),c=e("PJh5"),r=e.n(c),v={filters:{formatDate:function(t){return t&&r()(t).format("YYYY-MM-DD")||"请选择"}},components:{datePicker:o.a,picker:l.a},data:function(){return{form:{ljqk:"",hdlx:"",cjsy:"",images:"",ljkssj:"",ljjssj:"",mdd:"",kssj:"",jssj:""},hdlxFlag:"",ljqkFlag:"",show:!1,isDatePickerShow:!1,fileList:[],acitvityTypeList:[{label:"授课",value:"授课"},{label:"出席论坛",value:"出席论坛"},{label:"发表文章",value:"发表文章"},{label:"接受采访",value:"接受采访"},{label:"出版作品",value:"出版作品"},{label:"发表讲话",value:"发表讲话"},{label:"其他",value:"其他"}],ljqkList:[{label:"是",value:1},{label:"否",value:0}],list:[],pickerOptions:{pickerColumns:[]},keys:["ljqk","hdlx","cjsy","images","kssj","jssj"],dspToken:localStorage.dspToken}},mounted:function(){Object(n.syscodecontrollergetcjshhdlx)({dspToken:this.dspToken}).then(function(t){}),this.getHistoryList()},watch:{ljqkFlag:{handler:function(t,s){this.keys=1===t?a()(this.form):["hdsj","ljqk","hdlx","cjsy","images"]}}},methods:{submit:function(){var t=this;if(new Date(this.kssj)>new Date(this.jssj))return this.$toast("开始时间不能晚于结束时间");Object(n.shhdxxsavedata)({hdlx:this.hdlxFlag,hdsj:r()(this.form.kssj).format("YYYY-MM-DD")+"-"+r()(this.form.jssj).format("YYYY-MM-DD"),ljqk:this.ljqkFlag,cjsy:this.form.cjsy,dspToken:this.dspToken}).then(function(s){t.$toast("提交成功"),t.getHistoryList()})},getHistoryList:function(){var t=this;Object(n.shhdxxquerydata4list)({dspToken:this.dspToken}).then(function(s){t.list=s.data})},removeImage:function(t){this.fileList=this.fileList.filter(function(s){return t.content!==s.content})},afterRead:function(t){Object(n.uploadoneattachment)(t.file).then(function(t){console.log(t)})},showDatePicker:function(t){this.dateType=t,this.isDatePickerShow=!0},fetchDate:function(t){this.form[this.dateType]=t.originValue,this.isDatePickerShow=t.showDatePicker},hideDatePicker:function(t){this.isDatePickerShow=t.showDatePicker},showPicker:function(t){this.type=t,this.show=!0,this.pickerOptions.pickerColumns="ljqk"===t?this.ljqkList:this.acitvityTypeList},hidePicker:function(t){this.show=t.showPicker},setData:function(t){"ljqk"===this.type?(this.form.ljqk=t.value.label,this.ljqkFlag=t.value.value):(this.form.hdlx=t.value.label,this.hdlxFlag=t.value.value),this.show=t.showPicker}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"hospitalsign"},[e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v("参加社会活动信息")]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("参加的社会活动类型")]),t._v(" "),e("div",{class:{"empty-style":!t.form.hdlx},on:{click:function(s){return t.showPicker("hdlx")}}},[t._v(t._s(t.form.hdlx||"请选择"))])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("活动开始时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.kssj},on:{click:function(s){return t.showDatePicker("kssj")}}},[t._v(t._s(t._f("formatDate")(t.form.kssj)))])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("活动结束时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.jssj},on:{click:function(s){return t.showDatePicker("jssj")}}},[t._v(t._s(t._f("formatDate")(t.form.jssj)))])]),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("离京情况")]),t._v(" "),e("div",{class:{"empty-style":!t.form.ljqk},on:{click:function(s){return t.showPicker("ljqk")}}},[t._v(t._s(t.form.ljqk||"请选择"))])]),t._v(" "),t.ljqkFlag?e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("目的地")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mdd,expression:"form.mdd"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.form.mdd},on:{input:function(s){s.target.composing||t.$set(t.form,"mdd",s.target.value)}}})])]):t._e(),t._v(" "),t.ljqkFlag?e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("离京开始时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.ljkssj},on:{click:function(s){return t.showDatePicker("ljkssj")}}},[t._v(t._s(t._f("formatDate")(t.form.ljkssj)))])]):t._e(),t._v(" "),t.ljqkFlag?e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("离京结束时间")]),t._v(" "),e("div",{class:{"empty-style":!t.form.ljjssj},on:{click:function(s){return t.showDatePicker("ljjssj")}}},[t._v(t._s(t._f("formatDate")(t.form.ljjssj)))])]):t._e(),t._v(" "),e("div",{staticClass:"topinfo"},[e("div",{staticClass:"post"},[t._v("参加事由")]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.cjsy,expression:"form.cjsy"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.form.cjsy},on:{input:function(s){s.target.composing||t.$set(t.form,"cjsy",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"topinfo",staticStyle:{"border-bottom":"none"}},[e("div",{staticClass:"post"},[t._v("图片")]),t._v(" "),e("div",[e("van-uploader",{attrs:{"preview-image":!1,"after-read":t.afterRead},model:{value:t.fileList,callback:function(s){t.fileList=s},expression:"fileList"}},[e("van-button",{attrs:{icon:"plus",type:"primary"}},[t._v("上传文件")])],1)],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.fileList.length,expression:"fileList.length"}],staticClass:"topinfo noborder"},[t._l(t.fileList,function(s,i){return e("div",{key:i},[e("span",[t._v(t._s(s.file.name))]),e("van-icon",{attrs:{name:"cross"},on:{click:function(e){return t.removeImage(s)}}})],1)}),t._v(" "),e("div")],2)]),t._v(" "),e("div",{staticClass:"sign-btn",on:{click:t.submit}},[t._v("提交")]),t._v(" "),e("div",{staticClass:"historylist"},[e("p",{staticClass:"historytitle"},[t._v("历次活动记录")]),t._v(" "),t._l(t.list,function(s,i){return e("div",{key:i,staticClass:"item"},[e("div",[e("p",[t._v("活动日期："+t._s(s.hdsj))]),t._v(" "),e("p",[t._v(t._s(s.hdlx))])]),t._v(" "),e("router-link",{attrs:{to:{name:"ReturnVisitForm",query:{title:"填写社会活动报告",method:"activity",id:s.hdxxId}},tag:"div"}},[t._v("填写社会活动报告")])],1)})],2),t._v(" "),e("picker",{attrs:{columns:t.pickerOptions.pickerColumns,show:t.show},on:{fetchData:t.setData,cancel:t.hidePicker,hide:t.hidePicker}}),t._v(" "),e("date-picker",{attrs:{"date-type":"date",show:t.isDatePickerShow},on:{fetchData:t.fetchDate,cancel:t.hideDatePicker,hide:t.hideDatePicker}})],1)},staticRenderFns:[]};var h=e("VU/8")(v,d,!1,function(t){e("cU1V")},"data-v-2bc4faf4",null);s.default=h.exports}});
//# sourceMappingURL=31.cde7598600bf7be3d85f.js.map